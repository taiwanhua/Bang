<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewBag.Title - My ASP.NET Application</title>
    @Styles.Render("~/Content/css")
    @Scripts.Render("~/bundles/modernizr")
    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/bootstrap")
    @*<script type="text/javascript">

            //window.onload = function () {
            //    alert('You clicked ' + "!");
            //};
            window.onload = () => {
                alert('You clicked ' + "!");
            }

        </script>*@
    <script type="text/javascript">
        $(document).ready(function () {
            $('[data-toggle="tooltip"]').tooltip();
        });
        window.onload = () => {
            //alert('You clicked ' + "74574523!");
            //console.log("sdf")
            $('[data-toggle="tooltip"]').tooltip();
            $(".tab").mouseover((e) => {
                $(".tab").css({ "background-color": "#343a40" });
                $(e.target).css({ "background-color": "rgb(95 ,158, 160,0.5)", "border-radius": "4px" });
                $(".tab").mouseleave((e) => {
                    $(e.target).css({ "background-color": "#343a40" });
                })
            })
            $(".tab").click((e) => {
                console.log(typeof (e.target.innerText))
                let set = e.target.innerText
                localStorage.setItem('navselect', set);

            })
            if (typeof (localStorage.getItem('navselect')) != "undefined" && localStorage.getItem('navselect') != null) {
                let get = localStorage.getItem('navselect')
                //console.log(get)
                //console.log(get == "遊戲桌")
                switch (get) {
                    case "遊戲桌":
                        $(".tab").removeClass("cadetblue");
                        $(".tab:eq(0)").addClass("cadetblue");
                        break;
                    case "口袋":
                        $(".tab").removeClass("cadetblue");
                        $(".tab:eq(1)").addClass("cadetblue");

                        break;
                    case "光輝史":
                        $(".tab").removeClass("cadetblue");
                        $(".tab:eq(2)").addClass("cadetblue");
                        break;
                    default:

                }
            }
            if (typeof (localStorage.getItem('gotosignin')) == "undefined" || localStorage.getItem('gotosignin') == null) {
                if (typeof (localStorage.getItem('playerID')) != "undefined" && localStorage.getItem('playerID') != null) {
                    $("#notlogincard").addClass("dispnone")
                    $("#PlayerName").text("Hi," + localStorage.getItem('playerID'))
                    $("#PlayerName").addClass("nav-link toright1 mr-sm-2")
                    $("#LoginOut").text("登出")
                    $("#LoginOut").addClass("nav-link toright mr-sm-2")
                } else {
                    $("#notlogincard").removeClass("dispnone")
                }
            } else {
                if ((typeof (localStorage.getItem('playerID')) == "undefined" || localStorage.getItem('playerID') == null) && (typeof (localStorage.getItem('navselect')) != "undefined" && localStorage.getItem('navselect') != null)) {
                    $("#notlogincard").removeClass("dispnone")
                } else {
                    $("#notlogincard").addClass("dispnone")
                }
            }
            //const StoragePlayNameData = () => {
            //    //註冊後將自動登入，將PlayerName寫入LocalStorage
            //    $.ajax({
            //        type: "POST",
            //        url: "/home/LocalStorage_Read",
            //        success: function (result) {
            //            var obj = JSON.stringify(result);
            //            SummitLocalStorage.LocalStorage.save(obj);
            //            Alldata = SummitLocalStorage.LocalStorage.get({ key: "summit" });
            //            ReadStorageData(Alldata);
            //        }
            //    });

            //}
            $("#agotosignin").click((e) => {
                localStorage.removeItem('navselect')
                localStorage.setItem('gotosignin', "Yes");
                $("#notlogincard").addClass("dispnone")
                console.log("OK")

            })
            $("#agotosignin1").click((e) => {
                localStorage.removeItem('navselect')
                localStorage.setItem('gotosignin', "Yes");
                $("#notlogincard").addClass("dispnone")
                console.log("OK")

            })
            $("#LoginOut").click((e) => {
                localStorage.clear();
                $("#PlayerName").text("Hi")
                $("#PlayerName").addClass("nav-link toright1 mr-sm-2")
                $("#notlogincard").removeClass("dispnone")
                console.log("OK")

            });


            //##**********遊戲階段可呼叫函數 start************##

            /**
             * 開起下注金額框
             *
             */
            const openbettextbox = (e) => {


                let pID = "";

                //取得錢包餘額，並寫入LocalStorage

                let param = new FormData();
                param.append("playername", gls('playerID'));
                const PData = async () => {
                    let result = await fetch("/Players/Getneweramount", {
                        method: "POST",
                        body: param
                    })
                        .then(res => {
                            res.clone().json();
                            console.log(res.ok);
                            return res;
                        }, reject => console.log("failed"))
                        .then(data => {
                            console.log(data);
                            return data.json();
                        });
                    console.log(result);
                    pID = result;
                    console.log("get" + pID)
                    $("body").append("<div class=\"card text-white bg-dark mb-3\" style=\"max-width: 18rem;\"><div class=\"card-header\">請輸入下注金額</div><div class=\"card-body\">" + "口袋還有多深 : "+pID + "</div></div>");

                }
                PData();
                //不好用
                //$.ajax({
                //    type: "POST",
                //    url: "/Players/Getneweramount",
                //    data: { playername: gls('playerID') },
                //    success: function (result) {
                //        var obj = JSON.stringify(result);

                //        pID = obj;
                //        console.log("get" + pID)

                //        //SummitLocalStorage.LocalStorage.save(obj);
                //        //Alldata = SummitLocalStorage.LocalStorage.get({ key: "summit" });
                //    }
                //});
            }

            //##**********遊戲階段可呼叫函數 end************##


            /**
             *localStorage判斷函數，
             * 若此localStorage Item未設置，返回0
             * 若此localStorage Item已設置，且(字串)等於第二個參數，返回1
             * 若此localStorage Item已設置，且(字串)不等於第二個參數，返回-1
             * example:
             * localStorage.setItem('playerID1', "");
            *  console.log(Stringequal(localStorage.getItem('playerID1'), "123"))
             */
            const Stringequal = (localStorageItem, comparestring) => {
                /*傳入第一個參數:localStorageItem ，如localStorage.getItem('playerID')，與第二個參數:要看有沒有等於的字串*/
                if (localStorageItem === null) {
                    //未設置此localStorageItem
                    return 0;
                } else {
                    if (localStorageItem.toString() === comparestring) {
                        //此localStorageItem已設置，並且等於comparestring
                        return 1;
                    } else {
                        //此localStorageItem已設置，並且不等於comparestring
                        return -1;
                    }

                }
            }

            /**
             *localStorage判斷函數，
             * 若此localStorage Item已設置，且(字串)等於""，返回true
             * 若此localStorage Item已設置，且(字串)不等於""，返回false
             * example:
             * lsissetandnotequalstringempty('playerID')
             */
            const lsissetandnotequalstringempty = (itemname) => {
                //expr1 || expr2	若 expr1 可轉換為 true，則返回 expr1；不然，返回 expr2。
                if (0 != Stringequal(gls(itemname), "") || -1 == Stringequal(gls(itemname), "")) {
                    //localStorageItem itemname已設置且不為空
                    return true;
                } else {
                    //localStorageItem itemname已設置且為空
                    return false;
                }
            }

            /**
             * 透過名字取得localStorageItem
             * example:
             * gls('playerID')
             */
            const gls = (itemname) => {
                return localStorage.getItem(itemname)
            }
            /**
             * 設置所有bet(1-6)為最新的值
             * example:
             * setnewerbet()
             */
            const setnewerbet = () => {
                for (let i = 0; i < 3; i++) {
                    /*設置所有bet(1-6)為最新的值*/
                    let cls = ".subinnerrowtwobetsmall:eq(" + i + ")";
                    let ls = "bet" + (i + 1);
                    let getgls = gls(ls);
                    $(cls).attr({ "data-toggle": "tooltip", "data-placement": "top", "title": getgls })
                }
                for (let i = 0; i < 3; i++) {
                    /*設置所有bet(1-6)為最新的值*/
                    let cls = ".subinnerrowtwobetbig:eq(" + i + ")";
                    let ls = "bet" + (i + 4);
                    let getgls = gls(ls);
                    $(cls).attr({ "data-toggle": "tooltip", "data-placement": "top", "title": getgls })
                }
                $('[data-toggle="tooltip"]').tooltip();//再次加載樣式
            }


            if (lsissetandnotequalstringempty('playerID')) {
                //localStorageItem playerID已設置且不為空
                //
                //若遊戲階段與下注區(1-6)接未設置:
                //  1.設定遊戲階段初始值: 0
                //  2.設定下注區(1-6)初始值: 0
                //  3.派牌鈕設置disable
                //  4.設置荷官對話框文字: XXX您好，請先點擊下注區下定盲注後派牌，提醒您今天所有的賠率皆為1:1。
                //    可以選擇只比花色大小、點數大小或綜合大小，大小順序:黑桃 > 愛心 > 方塊 > 梅花；A>K>Q>J>10>...>2，
                //    另外綜合大小為先比花色再比點數。
                //  5.設置下注區發光動畫
                //  6.設置下注區下注金額提示框
                localStorage.setItem('gamestate', 0);
                localStorage.setItem('bet1', 0);
                localStorage.setItem('bet2', 0);
                localStorage.setItem('bet3', 0);
                localStorage.setItem('bet4', 0);
                localStorage.setItem('bet5', 0);
                localStorage.setItem('bet6', 0);
                $("#bidded").attr({ "disabled": "disabled" });
                $(".textconsole").text(gls('playerID') + "您好，請先點擊下注區下定盲注後派牌，提醒您今天所有的賠率皆為1:1。可以選擇只比花色大小、點數大小或綜合大小，大小順序: 黑桃 > 愛心 > 方塊 > 梅花；A > K > Q > J > 10 >...> 2，另外綜合大小為先比花色再比點數。")
                //提示框屬性 data-toggle="tooltip" data-placement="top" title="Tooltip on top"
                $(".innerrowtwobetsmall").addClass("addshine");
                $(".innerrowtwobetbig").addClass("addshine");
                $(".subinnerrowtwobetsmall").addClass("plzbet");
                $(".subinnerrowtwobetbig").addClass("plzbet");
                setnewerbet();


                $(".subinnerrowtwobetbig").click(openbettextbox);
                //openbettextbox();


            }







        }
    </script>
</head>

<body>
    <div class="navbar navbar-inverse navbar-fixed-top">
        <div class="container">
            <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
                @*<a class="navbar-brand" href="#">@Html.ActionLink("Bang!", "Index", "Home", new { area = "" }, new { @class = "navbar-brand" })</a>*@
                <a class="navbar-brand mosueorigin" a href=javascript:void(0)>Bang!</a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarColor01" aria-controls="navbarColor01" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>

                </button>

                <div class="collapse navbar-collapse" id="navbarColor01">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item active">
                            @Html.ActionLink("遊戲桌", "Index", "Home", new { area = "" }, new { @class = "nav-link tab" })
                        </li>
                        <li class="nav-item active">
                            @Html.ActionLink("口袋", "About", "Home", new { area = "" }, new { @class = "nav-link tab" })
                        </li>
                        <li class="nav-item active">
                            @Html.ActionLink("光輝史", "Contact", "Home", new { area = "" }, new { @class = "nav-link tab" })
                        </li>
                        @*@Html.Partial("_LoginPartial")*@
                        <li class="nav-item active" id="PlayerName">
                            <a class="nav-link toright1 mr-sm-2">Hi</a>
                        </li>
                        <li class="nav-item active" id="LoginOut">
                            <a class="nav-link toright mr-sm-2">登出</a>
                        </li>
                    </ul>
                    @*<form class="form-inline">
                            <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
                            <button class="btn btn-outline-info my-2 my-sm-0" type="submit">Search</button>
                        </form>*@

                </div>
            </nav>







        </div>
    </div>
    <div class="container body-content">
        @RenderBody()
        @*未登入卡片*@
        <div class="card chlogincard" id="notlogincard" style="width: inherit;">
            <div class="card-body">
                <h5 class="card-title chcard-title">叮咚!</h5>
            </div>
            <div class="card-body chcard-body-1">

                <div class="card-text chcard-text">
                    還沒登入嗎?趕快前往登入或馬上註冊~<br><br><br>
                    以下為裝飾文字....<br>

                    注意事項：
                    （一）為促進兒童及少年身心健全發展，並保障其相關權益，甲方瞭解本款遊戲「遊戲軟體分級管理辦法」分類。一旦甲方按下「我同意」之按鍵，即推定甲方符合相關法令對使用本級別之服務的年齡要求。
                    （二）如果甲方是未成年人（未滿二十歲），甲方必須取得法定代理人（如：父母、監護人）之允許始得註冊成為會員；若甲方為無行為能力人，則請由甲方的法定代理人代為註冊申請。甲方對本合約書之同意及其他意思表示，均推定為已取得法定代理人之允許或符合法律行為之要件。 此外，由於此處之條款隨時可能變更，為保障甲方的權益，敬請依玩家公園所屬遊戲堅果遊戲平台、各遊戲官方網站公告通知查閱！

                    第一條　　服務條款適用之範圍
                    乙方提供甲方網路連線 遊戲服務及其他相關服務（以下簡稱本服務），甲乙雙方關於本服務之權利義務，依本服務條款之約定定之。

                    第二條    服務條款之內容
                    以下視為本服務條款之一部分，與本契約具有相同之效力：

                    乙方有關本服務之廣告或宣傳內容。
                    費率表及遊戲管理規則。
                    前項服務條款內容相互間有衝突者，應為消費者有利之解釋。

                    第三條    名詞定義
                    本服務條款之名詞定義如下：

                    網路連線遊戲：係指甲方透過電腦、智慧型裝置或其他電子化載具，連結網際網路至乙方指定之伺服器所進行連線遊戲。但不包括電子遊戲場業管理條例所稱電子遊戲機、單純區域連線或其他無需透過網路連結遊戲伺服器之遊戲服務。
                    遊戲網站：係指由乙方為提供本遊戲服務所建置之網站。
                    遊戲管理規則：係指由乙方訂立，供為規範遊戲進行方式之規則且不影響雙方服務條款上之權利義務者。
                    遊戲歷程：係指自甲方登入本遊戲起至登出本遊戲時止，電腦系統對甲方遊戲進行過程所為之紀錄。
                    儲值：係指甲方利用乙方所提供之付費方式。
                    外掛程式：係指非由乙方提供，以影響或改變乙方線上遊戲運作為目的之程式。
                    第四條    服務範圍
                    本服務條款所提供之服務，係由乙方提供網路伺服器，讓甲方透過網際網路連線登入進行本遊戲。但不包括甲方向網際網路接取服務業者申請接取網際網路之服務，及提供上網所需之各項硬體設備。

                    第五條    遊戲登錄

                    甲方申請使用本遊戲，得應乙方之要求，於遊戲網站登錄與身分證明文件相符之個人資料。甲方所登錄之個人資料，有錯誤或已變更時，應隨時更正之。
                    乙方若有為提供本服務而與甲方聯絡之必要，且甲方未提供正確之個人資料或原提供之資料已不符合真實而未更新，乙方得於甲方提供真實資料或更新資料前，暫停甲方遊戲進行及遊戲歷程查詢之服務。但甲方能以個人資料以外之方式證明其為契約當事人者，不在此限。
                    第六條　　特殊服務條款解除權規定
                    甲方得於開始遊戲後七日內，以電子郵件或書面告知乙方解除本契約，甲方無需說明理由及負擔任何費用。甲方得就未使用之儲值向乙方請求退費 。
                    第六條　　特殊服務條款解除權規定
                    甲方得於開始遊戲後七日內，以電子郵件或書面告知乙方解除本契約，甲方無需說明理由及負擔任何費用。甲方得就未使用之儲值向乙方請求退費 。

                    第七條    計費標準

                    本遊戲服務之收費計算方式為：
                    ■免費制
                    □計時制（應敘明計價單位及幣別，計價單位最高不得逾二小時）
                    □其他費制_____

                    本遊戲服務內（例如：遊戲商城、線上商店等）有提供需甲方額外付費購買之點數、商品或其他服務（例如：虛擬貨幣或寶物、進階道具等），乙方應在官網首頁、遊戲登入頁面或購買頁面公告載明付款方式及商品資訊。
                    費率調整時，乙方應於預定調整生效日三十日前於官網首頁、遊戲登入頁面或購買頁面公告；若甲方於註冊帳號時已登錄通訊資料者，並依甲方登錄之通訊資料通知甲方。
                    費率如有調整時，應自調整生效日起按新費率計收；若新費率高於舊費率時，甲方在新費率生效日前已於官網中登錄之付費購買點數或遊戲費用應依舊費率計收。
                    第八條    本遊戲應載明之資訊
                    乙方應於官網首頁、遊戲登入頁面或購買頁面及遊戲套件包裝上載明以下事項：

                    依遊戲軟體分級管理辦法規定標示遊戲分級級別及禁止或適合使用之年齡層。
                    進行本遊戲服務之最低軟硬體需求。
                    有提供安全裝置者，其免費或付費資訊。
                    有提供付費購買之機會中獎商品或活動，其活動內容、獎項、中獎及機率或稀有商品數量等資訊，並應記載「此為機會中獎商品，消費者購買或參與活動不代表即可獲得特定商品」等提示。
                    第九條  智慧財產權

                    網路連線遊戲，遊戲網站，及本服務上之所有著作及資料，其著作權、專利權、商標、營業秘密、其他智慧財產權，所有權或其他權利，均為乙方或其權利人所有，除事先經乙方或其個別權利人之合法授權外，甲方不得擅自以重製、傳輸、改作、編輯或以其他任何形式、基於任何目的加以使用，違者應自行負所有相關法律責任。
                    若甲方於遊戲中發生任何違反法令之行為及任何侵害他人智慧財產權情事發生情事，乙方在接獲公務機關及檢調單位和司法機關或其他政府機關之命令之後，得不經甲方同意即提供甲方之會員註冊資料及其上線時間及遊戲歷程紀錄，交予相關之單位做為佐證，本契約亦立即終止。
                    甲方在使用遊戲網站及本服務過程中所產生並儲存於遊戲網站中的任何資料資訊（包括但不僅限於帳號資訊、角色資訊、虛擬物品資訊、積分資訊等資料資訊），均屬於相關程式在運行過程中產生的衍生資料。乙方對上述資料資訊擁有所有權，甲方在按照本契約規定正常使用乙方網路遊戲的過程中對屬於其甲方帳號的資料資訊享有有限使用權。在不影響甲方正常接受服務的情況下，乙方有權決定保留或不保留伺服器上的全部或部分資料。乙方網路遊戲中的各種虛擬物品資料（包括但不限於元寶、金幣、銀幣、遊戲幣、道具、裝備）屬於乙方所提供的服務，其所有權歸乙方所有，甲方只能在遵守法律和本契約規定及遊戲規則的情況下使用。


                    第十條    服務條款之生效
                    甲方於契約審閱期過後初次註冊帳號，進入顯示本契約條款之網頁，並按「同意」之選項後，即推定甲方同意本契約條款之規定。

                    第十一條    帳號與密碼之使用

                    甲方完成註冊程序後取得之帳號及密碼，僅供甲方使用。
                    前項之密碼得依乙方提供之修改機制進行變更。乙方人員（含客服人員、遊戲管理員）不得主動詢問甲方之密碼。乙方應於契約終止後三十日內，保留甲方之帳號及附隨於該帳號之電磁紀錄。
                    契約非因可歸責甲方之事由而終止者，甲方於前項期間內辦理續用後，有權繼續使用帳號及附隨於該帳號之電磁紀錄。
                    契約終止後三十日 屆滿時，甲方仍未辦理續用，乙方得刪除該帳號及附隨於該帳號之所有資料，但法令另有規定者不在此限。
                    第十二條    帳號與密碼之非法使用通知與處理

                    當事人一方如發現帳號、密碼被非法使用時，應立即通知對方並由乙方進行查證，經乙方確認有前述情事後，得暫停該組帳號或密碼之使用權，更換帳號或密碼予甲方，立即限制第三人就本遊戲服務之使用權利，並將相關處理方式揭載於遊戲管理規則。
                    乙方應於暫時限制遊戲使用權利之時起，即刻以官網公告、簡訊、電子郵件、推播或其他雙方約定之方式通知前項第三人提出說明。如該第三人未於接獲通知時起七日內提出說明，乙方應直接回復遭不當移轉之電磁紀錄予甲方，如不能回復時可採其他雙方同意之相當補償方式，並於回復後解除對第三人之限制。但乙方有提供免費安全裝置（例如：防盜卡、電話鎖等）而甲方不使用或有其他可歸責於甲方之事由，乙方不負回復或補償責任。
                </div>



            </div>
            <div class="card-body">
                <div class="row">
                    <div class="chcard-link col-6">
                        @Html.ActionLink("登入", "Login", "Players", new { area = "" }, new { @class = "card-link", id = "agotosignin1" })
                    </div>
                    <div class="chcard-link col-6">

                        @Html.ActionLink("前往註冊", "Create", "Players", new { area = "" }, new { @class = "card-link", id = "agotosignin" })

                    </div>
                </div>
            </div>
        </div>
        <footer>
            <p>&copy; @DateTime.Now.Year - Bang! Bang! Bang! <font face="DFKai-sb">就叫你不要賭</font></p>
        </footer>
    </div>

    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/bootstrap")
    @RenderSection("scripts", required: false)
</body>
</html>
